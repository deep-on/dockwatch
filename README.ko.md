# ğŸ³ DockWatch

ğŸŒ [English](README.md) | **í•œêµ­ì–´**

**Docker ì»¨í…Œì´ë„ˆ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ â€” ì´ìƒ íƒì§€ & í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì§€ì›**

ì»¨í…Œì´ë„ˆ í•˜ë‚˜. ëª…ë ¹ì–´ í•˜ë‚˜. ì™„ë²½í•œ ê°€ì‹œì„±.

![License](https://img.shields.io/badge/license-MIT-blue)
![Python](https://img.shields.io/badge/python-3.12-green)
![Docker](https://img.shields.io/badge/docker-compose-blue)

---

## ì£¼ìš” ê¸°ëŠ¥

- **ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ** â€” ë‹¤í¬ í…Œë§ˆ ì›¹ UI, 10ì´ˆ ìë™ ê°±ì‹ 
- **ì»¨í…Œì´ë„ˆ ëª¨ë‹ˆí„°ë§** â€” CPU, ë©”ëª¨ë¦¬, ë„¤íŠ¸ì›Œí¬ I/O, ë¸”ë¡ I/O, ì¬ì‹œì‘ íšŸìˆ˜
- **í˜¸ìŠ¤íŠ¸ ëª¨ë‹ˆí„°ë§** â€” CPU/GPU ì˜¨ë„, ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰, ë¡œë“œ í‰ê· 
- **ì´ìƒ íƒì§€** â€” ìƒíƒœ ë¨¸ì‹  ê¸°ë°˜ ê·œì¹™ ì—”ì§„ (CPU í­ì£¼, ë©”ëª¨ë¦¬ ì´ˆê³¼, ë””ìŠ¤í¬ ë¶€ì¡±, ë„¤íŠ¸ì›Œí¬ ìŠ¤íŒŒì´í¬, ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘)
- **í…”ë ˆê·¸ë¨ ì•Œë¦¼** â€” ì¦‰ì‹œ ì•Œë¦¼ + ì•Œë¦¼ ìœ í˜•ë³„ 30ë¶„ ì¿¨ë‹¤ìš´
- **ì¸ì¦ + ë ˆì´íŠ¸ ë¦¬ë°‹** â€” Basic Auth + ë¸Œë£¨íŠ¸í¬ìŠ¤ ë°©ì–´ (5íšŒ ì‹¤íŒ¨ ì‹œ 60ì´ˆ ì°¨ë‹¨)
- **HTTPS** â€” ìì²´ ì„œëª… SSL ë˜ëŠ” Cloudflare Tunnel (í¬íŠ¸í¬ì›Œë”© ë¶ˆí•„ìš”)
- **SQLite ì‹œê³„ì—´** â€” 7ì¼ ë³´ê´€, ì™¸ë¶€ DB ë¶ˆí•„ìš”
- **ì›ë¼ì´ë„ˆ ì„¤ì¹˜** â€” ëŒ€í™”í˜• ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸, ëª‡ ì´ˆë©´ ì™„ë£Œ

## ë¹ ë¥¸ ì‹œì‘

```bash
git clone https://github.com/deep-on/dockwatch.git
cd dockwatch
bash install.sh
```

ë. ë¸Œë¼ìš°ì €ì—ì„œ `https://localhost:9090` ì ‘ì†í•˜ì„¸ìš”.

## ëŒ€ì‹œë³´ë“œ êµ¬ì„±

| ì„¹ì…˜ | ë‚´ìš© |
|------|------|
| í˜¸ìŠ¤íŠ¸ ì¹´ë“œ | CPU ì˜¨ë„, GPU ì˜¨ë„, ë””ìŠ¤í¬ %, ë¡œë“œ í‰ê·  |
| ì»¨í…Œì´ë„ˆ í…Œì´ë¸” | CPU/ë©”ëª¨ë¦¬/ë„¤íŠ¸ì›Œí¬ ê¸°ì¤€ ì •ë ¬, ì´ìƒ ì‹œ ë¹¨ê°„ìƒ‰ í‘œì‹œ |
| ì°¨íŠ¸ (4ê°œ) | ì»¨í…Œì´ë„ˆ CPUÂ·ë©”ëª¨ë¦¬ ì¶”ì´, í˜¸ìŠ¤íŠ¸ ì˜¨ë„Â·ë¡œë“œ (Chart.js) |
| Docker ë””ìŠ¤í¬ | ì´ë¯¸ì§€, ë¹Œë“œ ìºì‹œ, ë³¼ë¥¨, ì»¨í…Œì´ë„ˆ RW ë ˆì´ì–´ |
| ì•Œë¦¼ ì´ë ¥ | ìµœê·¼ 24ì‹œê°„ íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ |

## ì´ìƒ íƒì§€ ê·œì¹™

| ê·œì¹™ | ì¡°ê±´ | ë™ì‘ |
|------|------|------|
| ì»¨í…Œì´ë„ˆ CPU | >80% 3íšŒ ì—°ì† (30ì´ˆ) | í…”ë ˆê·¸ë¨ + ëŒ€ì‹œë³´ë“œ ë¹¨ê°„ìƒ‰ |
| ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ | >90% (limit ëŒ€ë¹„) | ì¦‰ì‹œ ì•Œë¦¼ |
| í˜¸ìŠ¤íŠ¸ CPU ì˜¨ë„ | >85Â°C | ì¦‰ì‹œ ì•Œë¦¼ |
| í˜¸ìŠ¤íŠ¸ ë””ìŠ¤í¬ | >90% ì‚¬ìš© | ì¦‰ì‹œ ì•Œë¦¼ |
| ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ | restart_count ì¦ê°€ | ì¦‰ì‹œ ì•Œë¦¼ |
| ë„¤íŠ¸ì›Œí¬ ìŠ¤íŒŒì´í¬ | RX 10ë°° ê¸‰ì¦ + 100MB ì´ìƒ | ì¦‰ì‹œ ì•Œë¦¼ |

ëª¨ë“  ì„ê³„ê°’ì€ í™˜ê²½ë³€ìˆ˜ë¡œ ì¡°ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DockWatch Container                    â”‚
â”‚                                         â”‚
â”‚  FastAPI + uvicorn (port 9090)          â”‚
â”‚  â”œâ”€â”€ collectors/                        â”‚
â”‚  â”‚   â”œâ”€â”€ containers.py  (aiodocker)     â”‚
â”‚  â”‚   â”œâ”€â”€ host.py        (/proc, /sys)   â”‚
â”‚  â”‚   â””â”€â”€ images.py      (system df)     â”‚
â”‚  â”œâ”€â”€ alerting/                          â”‚
â”‚  â”‚   â”œâ”€â”€ detector.py    (ìƒíƒœ ë¨¸ì‹ )      â”‚
â”‚  â”‚   â””â”€â”€ telegram.py    (httpx)         â”‚
â”‚  â”œâ”€â”€ storage/                           â”‚
â”‚  â”‚   â””â”€â”€ db.py          (SQLite)        â”‚
â”‚  â””â”€â”€ static/                            â”‚
â”‚      â””â”€â”€ index.html     (Chart.js)      â”‚
â”‚                                         â”‚
â”‚  ë§ˆìš´íŠ¸ ë³¼ë¥¨:                             â”‚
â”‚    docker.sock (ro), /sys (ro),         â”‚
â”‚    /proc (ro), SQLite named volume      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì˜ì¡´ì„± (4ê°œë§Œ):**
- `fastapi` â€” ì›¹ í”„ë ˆì„ì›Œí¬
- `uvicorn` â€” ASGI ì„œë²„
- `aiodocker` â€” ë¹„ë™ê¸° Docker API í´ë¼ì´ì–¸íŠ¸
- `httpx` â€” ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸ (í…”ë ˆê·¸ë¨ API)

## ì„¤ì •

`.env` íŒŒì¼ë¡œ ëª¨ë“  ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

```env
# ì¸ì¦
AUTH_USER=admin
AUTH_PASS=your-password

# í…”ë ˆê·¸ë¨ (ì„ íƒ)
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id

# ì„ê³„ê°’ (ì„ íƒ)
CPU_THRESHOLD=80
MEM_THRESHOLD=90

# Cloudflare Tunnel (ì„ íƒ)
CF_TUNNEL_TOKEN=your-tunnel-token
```

## ì ‘ì† ë°©ì‹

### ë¡œì»¬ ëª¨ë“œ (ìì²´ ì„œëª… SSL)
```bash
# ê¸°ë³¸ ëª¨ë“œ â€” ìì²´ ì„œëª… ì¸ì¦ì„œ ìë™ ìƒì„±
bash install.sh  # ì˜µì…˜ 1 ì„ íƒ
```
`https://localhost:9090` ë˜ëŠ” `https://<ì„œë²„IP>:9090`ìœ¼ë¡œ ì ‘ì†

### Cloudflare Tunnel (í¬íŠ¸í¬ì›Œë”© ë¶ˆí•„ìš”)
```bash
# ê³µìœ ê¸° ì„¤ì • ì—†ì´ ì™¸ë¶€ HTTPS ì ‘ì†
bash install.sh  # ì˜µì…˜ 2 ì„ íƒ, í„°ë„ í† í° ì…ë ¥
```
Cloudflare í„°ë„ ë„ë©”ì¸ìœ¼ë¡œ ì ‘ì† â€” ì •ì‹ HTTPS ì¸ì¦ì„œ ìë™ ì ìš©

## API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|-----------|------|
| `GET /` | ëŒ€ì‹œë³´ë“œ HTML |
| `GET /api/current` | ìµœì‹  ìŠ¤ëƒ…ìƒ· (ì»¨í…Œì´ë„ˆ + í˜¸ìŠ¤íŠ¸ + ì´ë¯¸ì§€ + ì´ìƒíƒì§€) |
| `GET /api/history/{name}?hours=1` | ì»¨í…Œì´ë„ˆ ì‹œê³„ì—´ ë°ì´í„° |
| `GET /api/history/host?hours=1` | í˜¸ìŠ¤íŠ¸ ì‹œê³„ì—´ ë°ì´í„° |
| `GET /api/alerts?hours=24` | ì•Œë¦¼ ì´ë ¥ |
| `GET /api/health` | í—¬ìŠ¤ì²´í¬ (ì¸ì¦ ë¶ˆí•„ìš”) |

## ë³´ì•ˆ

- **Basic Auth** â€” ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ì¸ì¦ í•„ìˆ˜ (`/api/health` ì œì™¸)
- **ë ˆì´íŠ¸ ë¦¬ë°‹** â€” ë¡œê·¸ì¸ 5íšŒ ì‹¤íŒ¨ ì‹œ IPë³„ 60ì´ˆ ì°¨ë‹¨
- **HTTPS** â€” ìì²´ ì„œëª… ë˜ëŠ” Cloudflare Tunnel
- **ì½ê¸° ì „ìš© ë§ˆìš´íŠ¸** â€” Docker ì†Œì¼“, /sys, /proc ëª¨ë‘ read-only
- **ì œì–´ ê¸°ëŠ¥ ì—†ìŒ** â€” ëª¨ë‹ˆí„°ë§ ì „ìš©, ì»¨í…Œì´ë„ˆ ì¡°ì‘ ë¶ˆê°€

## ìˆ˜ë™ ì„¤ì¹˜

ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ëŒ€ì‹  ì§ì ‘ ì„¤ì •í•˜ë ¤ë©´:

```bash
git clone https://github.com/deep-on/dockwatch.git
cd dockwatch

# .env ì„¤ì •
cp .env.example .env
vi .env

# SSL ì¸ì¦ì„œ ìƒì„±
mkdir -p certs
openssl req -x509 -newkey rsa:2048 -nodes \
  -keyout certs/key.pem -out certs/cert.pem \
  -days 365 -subj "/CN=dockwatch"

# ì‹œì‘
docker compose up -d --build
```

## ë¼ì´ì„ ìŠ¤

MIT License â€” [LICENSE](LICENSE) ì°¸ì¡°

---

[DeepOn Inc.](https://github.com/deep-on)ì—ì„œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
